<workflowGraph name="analyzeMetaboliteProfiles">
    <param name="parentDataDir"/>
    <param name="experimentName"/>
    <param name="experimentVersion"/>
    <param name="gusConfigFile"/>

    <constant name="workingDir">$$parentDataDir$$/workingDir</constant>
    <constant name="resultsDir">$$parentDataDir$$/outputDir</constant>
    
    <step name="makeWorkingDir" stepClass="ReFlow::StepClasses::MakeDataDir">
      <paramValue name="dataDir">$$workingDir$$</paramValue>
    </step>

    <step name="makeProfiles" stepClass="ApiCommonWorkflow::Main::WorkflowSteps::StudyAssayResultsNextflow">
      <paramValue name="analysisConfigFile">$$parentDataDir$$/final/analysisConfig.xml</paramValue>
      <paramValue name="finalDir">$$parentDataDir$$/final</paramValue>
      <paramValue name="workingDir">$$workingDir$$</paramValue>
      <paramValue name="resultsDir">$$resultsDir$$</paramValue>
      <paramValue name="technologyType">metabolite_massSpec</paramValue>
      <paramValue name="nextflowWorkflow">VEuPathDB/study-assay-results-nextflow</paramValue>
      <paramValue name="isGitRepo">true</paramValue>
      <depends name="makeWorkingDir"/>
    </step>

  <step name="loadStudyResultsFromConfig" stepClass="ApiCommonWorkflow::Main::WorkflowSteps::InsertStudyResults" stepLoadTypes="plugin">
      <paramValue name="configFile">$$parentDataDir$$/outputDir/insert_study_results_config.txt</paramValue>
      <paramValue name="inputDir">$$parentDataDir$$/outputDir</paramValue>
      <paramValue name="extDbRlsSpec">$$experimentName$$|$$experimentVersion$$</paramValue>
      <paramValue name="studyName">$$experimentName$$</paramValue>
      <paramValue name="gusConfigFile">$$gusConfigFile$$</paramValue>
    <depends name="makeProfiles"/>
 <!--<dependsGlobal name="oboOntologies"/>-->
  </step>



</workflowGraph>
